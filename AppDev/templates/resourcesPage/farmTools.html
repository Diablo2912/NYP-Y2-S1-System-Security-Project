{% extends "base.html" %}
{% block content %}

<h1 class="text-center my-4">Precision Agriculture Tools</h1>

<!-- DataTables + jQuery (no logic changes) -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

<style>
  :root{
    --pa-accent:#198754;              /* Cropzy green */
    --pa-wash:#f1f7f4;                /* soft mint background */
    --pa-border:rgba(25,135,84,.18);
  }

  /* Wider page wrapper */
  .pa-wrap{
    max-width: 1600px;   /* wider than Bootstrap .container */
    margin: 0 auto;
    padding: 0 16px;
  }

  /* Section cards */
  .pa-card{
    background:#fff;
    border:1px solid var(--pa-border);
    border-radius:18px;
    box-shadow:0 8px 24px rgba(0,0,0,.06);
    padding:1.25rem;
  }

  /* Subtitles */
  .pa-subtitle{
    display:flex; align-items:center; gap:.5rem;
    margin-bottom:.35rem;
    font-weight:700;
    font-size: clamp(1.4rem, 1.1rem + .8vw, 2rem);
  }
  .pa-subtitle::before{
    content:""; width:10px; height:10px; border-radius:50%;
    background:var(--pa-accent);
    box-shadow:0 0 0 4px var(--pa-wash);
  }
  .pa-note{ color:#6c757d; margin:0 0 .75rem 0 }

  /* Table polish */
  #farmToolsTable{
    width:100% !important;
    border:1px solid var(--pa-border);
    border-radius:14px;
    overflow:hidden;
  }
  table.dataTable thead th{
    background:var(--pa-wash);
    border-bottom:1px solid var(--pa-border) !important;
  }
  .dataTables_wrapper .dataTables_filter input{
    border-radius:10px; border:1px solid var(--pa-border);
  }
  .dataTables_wrapper .dataTables_length select{
    border-radius:10px; border:1px solid var(--pa-border);
  }

  /* Map frame */
  .pa-map{
    border:1px solid var(--pa-border);
    border-radius:18px;
    overflow:hidden;
    box-shadow:0 8px 24px rgba(0,0,0,.06);
  }
</style>

<div class="pa-wrap">

  <!-- Plant DB (wider card) -->
  <div class="pa-card mb-4">
    <h2 class="pa-subtitle">Plant Database</h2>
    <p class="pa-note">This table shows optimum growing conditions for each crop.</p>

    <div class="table-responsive">
      <table id="farmToolsTable" class="table table-hover align-middle w-100">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Plant</th>
            <th scope="col">Optimum Temperature</th>
            <th scope="col">Optimum pH</th>
            <th scope="col">Water Supply</th>
            <th scope="col">Soil &amp; Fertiliser</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">1</th>
            <td>Corn</td>
            <td>21–29°C</td>
            <td>5.8–7.0</td>
            <td>Moderate to High (requires consistent moisture)</td>
            <td>Well-drained, fertile soil with balanced nutrients. Needs nitrogen-based fertiliser.</td>
          </tr>
          <tr>
            <th scope="row">2</th>
            <td>Wheat</td>
            <td>15–18°C</td>
            <td>6.0–7.0</td>
            <td>Moderate (requires well-drained soil)</td>
            <td>Well-drained loamy soil. Balanced fertiliser with adequate nitrogen.</td>
          </tr>
          <tr>
            <th scope="row">3</th>
            <td>Rice</td>
            <td>25–32°C</td>
            <td>5.0–6.5</td>
            <td>High (needs constant water, can tolerate flooding)</td>
            <td>Waterlogged soils, nutrient-rich. Requires nitrogen and potassium fertiliser.</td>
          </tr>
          <tr>
            <th scope="row">4</th>
            <td>Soybeans</td>
            <td>20–30°C</td>
            <td>6.0–7.0</td>
            <td>High (needs constant water, can tolerate flooding)</td>
            <td>Well-drained, loamy soil. Needs balanced fertiliser with moderate nitrogen.</td>
          </tr>
          <tr>
            <th scope="row">5</th>
            <td>Cotton</td>
            <td>21–30°C</td>
            <td>5.5–7.0</td>
            <td>Moderate (dry conditions suited)</td>
            <td>Well-drained, sandy loam soil. Nitrogen and potassium fertiliser.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Map -->
  <div class="pa-card">
    <h2 class="pa-subtitle">Soil Information Map</h2>
    <p class="pa-note">This map shows soil information across different parts of Singapore.</p>
    <div class="ratio ratio-16x9 pa-map">
      <iframe
        src="{{ url_for('static', filename='/map.html') }}"
        title="Soil Information Map"
        loading="lazy"
        frameborder="0">
      </iframe>
    </div>
  </div>

</div>

<!-- DataTables init (cosmetic only) -->
<script>
  $(function () {
    const dt = $('#farmToolsTable').DataTable();
    $('.dataTables_filter input').addClass('form-control form-control-sm').attr('placeholder','Search plants…');
    $('.dataTables_length select').addClass('form-select form-select-sm');
  });
</script>

{% endblock %}
